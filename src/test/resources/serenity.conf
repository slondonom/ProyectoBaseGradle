serenity {
    project.name="ProyectoBaseGradle"
    serenity.restart.browser.for.each = scenario
    take.screenshots = AFTER_EACH_STEP
    #take.screenshots = FOR_EACH_ACTION
    logging = verbose
    report.test.durations = true
    # Configuración de codificación UTF-8
    encoding = "UTF-8"
    file.encoding = "UTF-8"
    systemProperties {
        file.encoding = "UTF-8"
    }
}
serenity.console.colors=true
serenity.logging=verbose
serenity.verbose.steps=true
serenity.reports.show.step.details=true
serenity.maintain.session = true

pages {
    qa = "https://www.demoblaze.com/"
}

environments {
  gui {
    webdriver {
      driver = edge
      autoupdate = true
      capabilities {
              browserName = "MicrosoftEdge"
              "ms:edgeOptions" {
                  args = [
                      "--incognito",
                      "--disable-infobars",
                      "--disable-gpu",
                      "--disable-default-apps",
                      "--disable-popup-blocking",
                      "--start-maximized",
                      "--lang=es-ES"
                  ]
                  prefs {
                      "intl.accept_languages" = "es-ES,es"
                      "browser.uidensity" = 1
                      "settings.language.preferred_languages" = "es-ES,es"
                  }
              }
       timeouts {
        implicit = 10000
        pageLoad = 10000
           }
    }
    wait.for.timeout = 30000
    }
  }
  headless {
      webdriver {
          driver = edge
          autoupdate = true
          capabilities {
              browserName = "MicrosoftEdge"
              "ms:edgeOptions" {
                  args = [
                      "--headless",
                      "--window-size=1920,1080",  # Asegura resolución Full HD
                      "--incognito",
                      "--disable-gpu",
                      "--disable-extensions",
                      "--disable-dev-shm-usage",
                      "--no-sandbox",
                      "--start-maximized",
                      "--lang=es-ES"
                  ]
                  prefs {
                      "intl.accept_languages" = "es-ES,es"
                      "browser.uidensity" = 1
                  }
              }
          }
          excludeSwitches = ["enable-automation", "load-extension"]
      }
      timeouts {
          implicit = 15000
          pageLoad = 300000
      }
      wait.for.timeout = 30000
  }
}

headless.mode = false
